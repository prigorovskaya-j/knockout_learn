<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type='text/javascript' src='jquery.js'></script>
    <script type='text/javascript' src='knockout-3.5.1.js'></script>
    <title>Рендеринг шаблонов</title>
</head>
<body>
<div>
    <h2>Участники</h2>
    <div data-bind="template: { name: 'person-template', data: buyer }"></div>
    <div data-bind="template: { name: 'person-template', data: seller }"></div>
</div>  
<div>
    <h2>Участники2</h2>
    <div data-bind="template: { name: 'person-template', foreach: people }"></div>
</div>

<script type="text/html" id="person-template">
    <h3 data-bind="text: name"></h3>
    <p>Кредиты: <span data-bind="text: credits"></span></p>
</script>

<ul data-bind="template: { name: 'seasonTemplate', foreach: seasons, as: 'season' }"></ul>

<script type="text/html" id="seasonTemplate">
    <li>
        <strong data-bind="text: name"></strong>
        <ul data-bind="template: { name: 'monthTemplate', foreach: months, as: 'month' }"></ul>
    </li>
</script>

<script type="text/html" id="monthTemplate">
    <li>
        <span data-bind="text: month"></span>
        в
        <span data-bind="text: season.name"></span>
    </li>
</script>
<div>
    <ul data-bind='template: { name: $root.displayMode, foreach: employees }'></ul>
</div>

<h1>Люди</h1>
<div data-bind="template: 'peopleList'"></div>
<script type="text/html" id="peopleList">
    {{each peoples}}
        <p>
            <b>${names}</b> ${age} лет
        </p>
    {{/each}}
</script>
<script type="text/javascript">
    var self = this;
    function MyViewModel() {
        //Рендеринг именованного шаблона
        self.buyer = { name: 'Франклин', credits: 250 };
        self.seller = { name: 'Марио', credits: 5800 };
        //Использование параметра «foreach» с именованным шаблоном
        self.people = [
                { name: 'Franklin', credits: 250 },
                { name: 'Mario', credits: 5800 }
        ];
        //Использование «as» для присвоения псевдонима элементам «foreach»
        self.seasons = ko.observableArray([
            { name: 'Весна', months: [ 'Март', 'Апрель', 'Май' ] },
            { name: 'Лето', months: [ 'Июнь', 'Июль', 'Август' ] },
            { name: 'Осень', months: [ 'Сентябрь', 'Октябрь', 'Ноябрь' ] },
            { name: 'Зима', months: [ 'Декабрь', 'Январь', 'Февраль' ] }
        ]);
        //Динамический выбор используемого шаблона
        self.employees = ko.observableArray([
            { name: "Kari", active: ko.observable(true) },
            { name: "Brynn", active: ko.observable(false) },
            { name: "Nora", active: ko.observable(false) }
        ]);
        self.displayMode = function(employee) {
            return employee.active() ? "active" : "inactive";
        };
        self.employees()[1].active(true);
        //Использование jQuery.tmpl, внешнего механизма шаблонов на основе строк
        self.peoples = ko.observableArray([
            { names: 'Анна', age: 123 },
            { names: 'Джейн', age: 125 },
        ]);
    };
     ko.applyBindings(new MyViewModel());
</script>


</body>
</html>